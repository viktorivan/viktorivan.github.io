<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: instalacion | Iván Rodríguez]]></title>
  <link href="http://viktorivan.github.io/blog/categories/instalacion/atom.xml" rel="self"/>
  <link href="http://viktorivan.github.io/"/>
  <updated>2016-07-06T09:49:02-05:00</updated>
  <id>http://viktorivan.github.io/</id>
  <author>
    <name><![CDATA[Iván Rodríguez]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Instalación GNU Radio con PyBombs versión 2]]></title>
    <link href="http://viktorivan.github.io/blog/2016/03/29/instalacion-gnu-radio-con-pybombs-version-2/"/>
    <updated>2016-03-29T20:24:26-06:00</updated>
    <id>http://viktorivan.github.io/blog/2016/03/29/instalacion-gnu-radio-con-pybombs-version-2</id>
    <content type="html"><![CDATA[<p><em>Introducción.</em></p>

<p><a href="http://gnuradio.org">GNU Radio</a> es un proyecto de software libre orientado a radio definido por software, basado en Python; existen diversos medios para instalar el conjunto de herramientas que comprenden a GNU Radio, desde los repositorios utilizando <code>apt-get</code> hasta la instalación desde el código fuente del proyecto en la terminal, con ayuda de un script o con un gestor de paquetes. La ventaja de instalar GNU Radio desde el código fuente con respecto a los repositorios es la versión de instalación, ya que los repositorios pueden tardar en actualizarse con respecto a los avances del proyecto.</p>

<!-- more -->

<p>Anteriormente, GNU Radio desarrolló una primera versión de <a href="https://github.com/gnuradio/pybombs/">PyBombs</a> que permitía la instalación del proyecto de una manera sencilla e inclusive intuitiva. Debido a la popularidad de PyBombs para la instalación de proyectos OOT de GNU Radio, se realizó una actualización que permite la fácil distribución e instalación de proyectos pero ahora es incluido desde el gestor <a href="https://pip.pypa.io">pip</a> de Python.</p>

<p><em>Instalación.</em></p>

<p>Primeramente es necesario instalar el gestor pip de Python, desde una terminal.</p>

<p><code>
$ sudo apt-get install python-pip python-dev build-essential git
$ sudo pip install --upgrade pip 
$ sudo pip install --upgrade virtualenv 
$ sudo pip install setuptools
</code></p>

<p>Una vez instalado el gestor de aplicaciones de Python, se procede a la instalación de PyBombs.</p>

<p><code>
$ sudo pip install PyBOMBS
</code></p>

<p>Teniendo una vez instalado el proyecto de PyBombs, se descargan las recetas donde están indicadas las ubicaciones de los proyectos para su descarga. </p>

<p><code>
$ pybombs recipes add gr-recipes git+https://github.com/gnuradio/gr-recipes.git
$ pybombs recipes add gr-etcetera git+https://github.com/gnuradio/gr-etcetera.git
</code></p>

<p>Para que GNU Radio pueda ser ejecutado desde cualquier ubicación se tiene que indicar donde se instalará el proyecto.</p>

<p><code>
$ sudo pybombs prefix init /usr/local -a myprefix
</code></p>

<p>Una vez inicializado el prefijo, se procede a la instalación de GNU Radio desde PyBombs.</p>

<p><code>
$ sudo pybombs -p myprefix install gnuradio gr-osmosdr
</code></p>

<p>Para ejecutar la interfaz gráfica de GNU Radio, sólo se ejecuta el comando.</p>

<p><code>
$ gnuradio-companion
</code></p>

<p><em>Íconos de GNU Radio</em></p>

<p>Para la instalación de los íconos, desde una terminal se ejecuta el comando:</p>

<p><code>
$ sudo /usr/local/libexec/gnuradio/grc_setup_freedesktop install
</code></p>

<p>De este modo, de manera automática se agregarán los íconos a los diferentes menús de la distribución de Linux.</p>

<p><em>Imágenes del firmware de USRP</em></p>

<p>Para poder utilizar las tarjetas USRP en el entorno de GNU Radio es necesario descargar las imágenes del firmware, esto se realiza con el siguiente comando:</p>

<p><code>
$ sudo /usr/local/lib/uhd/utils/uhd_images_downloader.py
</code></p>

<p><em>Otros comandos de PyBombs para GNU Radio</em></p>

<p>La aplicación de PyBombs tiene diferentes parámetros que permiten agregar, actualizar o remover diferentes elementos del entorno de GNU Radio. </p>

<p><code>
usage: pybombs [-h] [--version] [-p PREFIX] [--prefix-conf PREFIX_CONF]
               [--config CONFIG] [--config-file CONFIG_FILE] [-r RECIPES] [-q]
               [-v] [-y]
               &lt;command&gt; ...
pybombs: error: argument &lt;command&gt;: invalid choice: 'upgrade' (choose from 'config', 'lint', 'remove', 'update', 'install', 'rebuild', 'refetch', 'fetch', 'help', 'show', 'digraph', 'inv', 'deploy', 'recipes', 'prefix')
</code></p>

<p>Para actualizar el entorno o uno de los elementos de GNU Radio se utiliza el comando:</p>

<p><code>
sudo pybombs -p myprefix update gnuradio
</code></p>

<p>Si se desea conocer la lista de las aplicaciones instaladas,</p>

<p><code>
sudo pybombs -p myprefix update inv
</code></p>

<p><em>Actualización de GNU Radio</em></p>

<p>El entorno de GNU Radio se puede actualizar con el comando de update de PyBombs</p>

<p><code>
sudo pybombs -p myprefix update gnuradio
</code></p>

<p>En caso de que se presenten errores durante la actualización, puede que sea necesario mandar descargar nuevamente el código fuente de GNU Radio</p>

<p><code>
sudo pybombs -p myprefix rebuild gnuradio
</code></p>

<p>En caso de que todavía se presenten errores, es necesario reinicializar PyBombs, esto se hace eliminando diversas carpetas ocultas.</p>

<p>Una de ellas se ubica en la carpeta de <code>Home</code>, se llama <code>.pybombs</code>, que es donde se descargaron los archivos de <code>recipes</code>.</p>

<p>La segunda de ellas se ubica en <code>/usr/local</code>, se llama <code>.pybombs</code>, y en ella se encuentra el archivo que indica el prefijo de instalación de GNU Radio.</p>

<p>Finalmente se eliminan las carpetas relacionadas a las descargas del código fuente del entorno de GNU Radio, ubicado en ´/usr/local/src´.</p>

<p>Una vez eliminado todos estos archivos, se procede a descargar los archivos <code>recipes</code> e indicar el prefijo. De este modo, PyBombs instalará el entorno de GNU Radio sin tomar en consideración las versiones previas descargadas.</p>

<p>En caso de que el problema de la actualización persista, será necesario eliminar todos los archivos de GNU Radio ubicados en <code>usr/local/</code>, realizando de este modo una desinstalación manual del entorno.</p>

<p><em>Permisos de UHD para GNU Radio</em></p>

<p>En caso de que al querer ejecutar un archivo de GRC que incluya el bloque de UHD y salga el error siguiente:</p>

<p>``` 
UHD Error:
    USB open failed: insufficient permissions.
    See the application notes for your device.</p>

<pre><code>RuntimeError: LookupError: KeyError: No devices found for -----&gt; Empty Device Address ```
</code></pre>

<p>Se debe a que no se tienen los permisos para utilizar el puerto USB, una solución rápida es ejecutar GRC con permisos de root.</p>

<p><code>
$ sudo gnuradio-companion
</code></p>

<p>Para evitar ejecutar GRC como superusuario, es necesario actualizar las reglas, en primera instancia hay que localizar el archivo de las reglas de UDH, copiar el archivo en la ubicación de las reglas y finalmente volver a cargar las reglas del sistema. </p>

<p>```
$ sudo find / -name uhd-usrp.rules
/usr/local/src/uhd/host/utils/uhd-usrp.rules
/usr/local/lib/uhd/utils/uhd-usrp.rules</p>

<p>$ sudo cp /usr/local/src/uhd/host/utils/uhd-usrp.rules /etc/udev/rules.d/</p>

<p>$ sudo udevadm control –reload-rules
```</p>

<p><em>Conclusión.</em></p>

<p>El proyecto de PyBombs de GNU Radio ha mostrado un cambio que puede interpretarse como positivo, ya que permite agregar proyectos OOT de una manera sencilla e incluso modificar las recetas para proyectos personales y facilitar su distribución e instalación.</p>

<p>viktorivan@openmailbox.org</p>

<p>@viktor_ivan</p>
]]></content>
  </entry>
  
</feed>
