<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SciPy como alternativa a Matlab</title>
  <meta name="description" content="Resumen El uso de herramientas de programación como Matlab permiten que el desarrollo de simulaciones se realice de una manera muy práctica, dejando que el p...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html">
  <link rel="alternate" type="application/rss+xml" title="Iván Rodríguez" href="http://viktorivan.github.io/feed.xml">
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">Iván Rodríguez</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">SciPy como alternativa a Matlab</h1>
    <p class="post-meta"><time datetime="2014-06-13T14:38:58+00:00" itemprop="datePublished">Jun 13, 2014</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><em>Resumen</em></p>

<p>El uso de herramientas de programación como <a href="http://www.mathworks.com/">Matlab</a> permiten que el desarrollo de simulaciones se realice de una manera muy práctica, dejando que el programador sólo se enfoque a solucionar el problema y no batalle en la implementación del algoritmo. Matlab es un lenguaje de alto nivel que permite que usuarios con conocimientos básicos de programación, puedan implementar cualquier algoritmo de una manera simple y rápida, así mismo, cuenta con múltiples herramientas gráficas que ayudan en la interpretación de los resultados. Una alternativa para el uso de herramientas enfocadas a la investigación es <a href="http://www.scipy.org">SciPy</a> o <code class="highlighter-rouge">Python Científico</code>. SciPy es una biblioteca de <a href="http://www.python.org">Python</a> que permite realizar operaciones especializadas en un lenguaje de programación convencional, facilitando así el desarrollo de algoritmos y optimizando los tiempos de ejecución, de manera similar a Matlab.</p>

<!-- more -->

<p><em>Justificación</em></p>

<p>Una de las características principales de Matlab es el manejo de Matrices, de hecho, su nombre se deriva de la palabra <code class="highlighter-rouge">Laboratorio de Matrices</code>. El uso de matrices y vectores permite manejar estructuras de datos mas complejas y realizar operaciones matemáticas que en un lenguaje de programación convencional requeriría varias líneas de código, por ejemplo, una simple multiplicación de matrices, donde en Matlab se realiza por un comando A*B, en otro lenguaje tendríamos que realizar (a groso modo) un ciclo For que recorra cada renglón de la matriz A y la multiplique por la columna de la matriz B y la suma de cada multiplicación colocarla en un nuevo arreglo en la posición que le corresponde.</p>

<p>Aunque Matlab es una herramienta poderosa y popular, esta no es de libre distribución debido a que su código es propietario; por lo que es limitado a la disponibilidad y tipo de licencias con que se disponga en el centro de trabajo. Una alternativa viable puede ser el uso de herramientas de código abierto, existen diversos proyectos que son compatibles incluso a nivel de código y manejo de archivos y datos, tal es el caso de <a href="http://www.octave.org">Octave</a>, que es un proyecto donde los archivos desarrollados en Matlab funcionan sin tener que cambiar el lenguaje en que fue programado, aunque existen algunas funciones especializadas no estan implementadas en Octave.</p>

<p>Aún así, la tendencia en algunos lenguajes de programación de libre distribución es ser multipropósitos, esto se logra con la ayuda de bibliotecas especializadas; Por ejemplo, Python, a través de SciPy, puede manipular datos en forma vectorial o matricial permitiendo una implementación sencilla del algoritmo y el cálculo de las operaciones matemáticas, ya que esta incluye funciones que van desde matemáticas básica hasta avanzada.</p>

<p>SciPy o <code class="highlighter-rouge">Scientific Python</code> es una biblioteca de Python, que junto a Numpy y <a href="http://www.matplotlib.org">MatPlotLib</a>, proporcionan las herramientas necesarias para trabajar en el ambiente de la investigación y educación e incluso en el de desarrollo. En el caso de las telecomunicaciones, permite hacer transmisores OFDM con la ayuda de la función de transformadas de Fourier (<code class="highlighter-rouge">fft</code>, <code class="highlighter-rouge">ifft</code>), manejos de datos complejos y operaciones entre ellos (<code class="highlighter-rouge">absolute</code>, <code class="highlighter-rouge">norm</code>, <code class="highlighter-rouge">sum</code>) y generación de datos aleatorios con una distribución específica (<code class="highlighter-rouge">randn</code> para una distribución normal) o matrices de unos y ceros (<code class="highlighter-rouge">ones</code>, <code class="highlighter-rouge">zeros</code>). SciPy ofrece una <a href="http://wiki.scipy.org/NumPy_for_Matlab_Users">wiki</a> con una lista de comandos básicos de Matlab y su equivalente en SciPy.</p>

<p>MatPlotLib es una herramienta visual que permite mostrar los datos calculados en las simulaciones en diferentes tipos de gráficas, una muy utilizada en telecomunicaciones para el cálculo de BER es <code class="highlighter-rouge">semilogy</code>.</p>

<p>La instalación de SciPy en una distribución Linux basada en Debian/Ubuntu se realiza a través de la terminal de comandos.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo apt-get install python-numpy python-scipy python-matplotlib ipython ipython-notebook python-pandas python-sympy python-nose python-tk 
</code></pre>
</div>

<p>Un Ejemplo de un código desarrollado en Python con SciPy se muestra a continuación:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#Programa DFTS-OFDM

#Para ejecutar se requiere de scipy y matplotlib
#Desde una terminal ejecute: 
# sudo apt-get install python-numpy python-scipy python-matplotlib ipython ipython-notebook python-pandas python-sympy python-nose python-tk
#La simulacion la puede correr desde una terminal
# python DFTSOFDM.py

#Carga de bibliotecas
import scipy
import numpy
import matplotlib.pyplot

numpy.set_printoptions(precision=4,suppress=True)

#Datos de inicializacion
print "Inicializando parametros de simulacion"
snr = numpy.arange(0,33,8)
taps = 1.
itera = 1000.
paq = numpy.shape(snr)[0]*itera
datasize = 768
gx = "04C11DB7"
polsize = 32
dfts = 192
ofdm = 2048
cp = ofdm/4
pilot = 4
pilot_carriers = [-61,-31,31,61]
dfts_carriers = [x for x in (range(-((dfts+pilot)/2),0,1) + range(1,(dfts+pilot)/2+1,1)) if x not in pilot_carriers]

### TRANSMISOR ###

#Generacion de datos aleatorios
print "Generando bits de datos aleatorios"
datab = numpy.random.randint(2, size=(datasize-polsize)*paq)
datab = numpy.reshape(datab,(paq,-1))

#Etapa CRC
print "Calculando CRC"
pol = numpy.array([int(y) for x in bin(int(str(gx), 16))[2:].zfill(polsize).rjust(polsize+1,'1') for y in x])
datazeros = numpy.concatenate((datab,numpy.zeros((paq,polsize),dtype=numpy.int)),1)
datacrc = datazeros.copy()

#Calculo CRC
for j in range(scipy.shape(datazeros)[0]):
	for i in range(scipy.shape(datazeros)[1]): 
		if datazeros[j,i]==1 and i+scipy.shape(pol)[0]-1 &lt; scipy.shape(datazeros)[1]: 
			datazeros[j,i:scipy.shape(pol)[0]+i] = datazeros[j,i:scipy.shape(pol)[0]+i]^pol

#Datos con CRC
datacrc = datacrc|datazeros

#Modulador 16-QAM
print "Datos en el modulador digital"
dataqam = numpy.reshape(datacrc,(-1,4))
dataqam [:,[0,1]] = dataqam [:,[0,1]]*2-1
dataqam [:,[2,3]] = -(dataqam [:,[2,3]]*2-3)
datam = dataqam[:,0]*dataqam[:,2] + dataqam[:,1]*dataqam[:,3]*1j

#DFTS
print "Aplicando DFTS"
datadfts = numpy.reshape(datam,(-1,dfts))

for i in range(scipy.shape(datadfts)[0]):
	datadfts[i,0:scipy.shape(datadfts)[1]] = numpy.fft.fft(datadfts[i,0:scipy.shape(datadfts)[1]])

#OFDM
print "En el transmisor OFDM"
#Generacion de ceros y pilotos
datapilot = numpy.reshape(numpy.random.randint(2,size=paq*pilot)*2-1,(paq,-1))
dataofdm = numpy.zeros((paq,ofdm),dtype=numpy.complex)

#Asignacion de portadoras
dataofdm[:,pilot_carriers] = datapilot
dataofdm[:,dfts_carriers] = datadfts

#IFFT
for i in range(scipy.shape(dataofdm)[0]):
	dataofdm[i,0:scipy.shape(dataofdm)[1]] = numpy.fft.ifft(dataofdm[i,0:scipy.shape(dataofdm)[1]])

#Prefijo ciclico
dataofdm = numpy.concatenate((dataofdm[:,ofdm-cp:ofdm],dataofdm),1)

### CANAL ###
#Multitrayectoria
print "Agregando multitrayectorias del canal"
h = 1/numpy.sqrt(2*taps)*(numpy.random.randn(scipy.shape(dataofdm)[0],taps) + numpy.random.randn(scipy.shape(dataofdm)[0],taps)*1j)
h = numpy.reshape((numpy.tile(1./(numpy.arange(taps)+1),scipy.shape(dataofdm)[0])),(-1,taps))*h
H = numpy.zeros((paq,ofdm+cp),dtype=numpy.complex)
datacanal = numpy.zeros((paq,ofdm+cp),dtype=numpy.complex)

for i in range(scipy.shape(dataofdm)[0]):
	H[i] = numpy.fft.fft(h[i]/numpy.linalg.norm(h[i]),ofdm+cp)
	datacanal[i] = numpy.fft.fft(dataofdm[i])

datacanal = datacanal*H;

for i in range(scipy.shape(dataofdm)[0]):
	datacanal[i] = numpy.fft.ifft(datacanal[i])    
  
#AWGN
print "Sumando AWGN a los datos"
ebno = numpy.sqrt(numpy.reshape(numpy.repeat(10**(snr/10.),scipy.shape(datacanal)[1]*scipy.shape(datacanal)[0]/scipy.shape(snr)[0]),(-1,scipy.shape(datacanal)[1])))
awgn = (numpy.random.randn(scipy.shape(datacanal)[0],scipy.shape(datacanal)[1]) + numpy.random.randn(scipy.shape(datacanal)[0],scipy.shape(datacanal)[1])*1j)/(numpy.sqrt(2)*ebno)
datacanal = datacanal + awgn

### RECEPTOR ###
print "En el receptor OFDM"
#Remueve el prefijo ciclico
dataiofdm = datacanal[:,cp:ofdm+cp].copy()

#FFT
for i in range(scipy.shape(dataiofdm)[0]):
	dataiofdm[i,0:scipy.shape(dataiofdm)[1]] = numpy.fft.fft(dataiofdm[i,0:scipy.shape(dataiofdm)[1]])

#Ecualizador
print "Ecualizando los datos recibidos"
dataiofdm = dataiofdm[:,dfts_carriers].copy()/H[:,dfts_carriers]

#IDFTS
print "Calculando IDFTS"
for i in range(scipy.shape(dataiofdm)[0]):
	dataiofdm[i,0:scipy.shape(dataiofdm)[1]] = numpy.fft.ifft(dataiofdm[i,0:scipy.shape(dataiofdm)[1]])

#Demodulador 16-QAM
print "Demodulador digital"
datadem = numpy.reshape(dataiofdm,(1,-1))
datadem = numpy.transpose(numpy.vstack((numpy.real(datadem)&gt;0,numpy.imag(datadem)&gt;0,numpy.absolute(numpy.real(datadem))&lt;2,numpy.absolute(numpy.imag(datadem))&lt;2))*1)

#Recepcion para calculo de CRC
print "Calculo de CRC Check"
datarcrc = numpy.reshape(datadem,(paq,-1))
datarx = datarcrc.copy()

#Calculo de CRC
for j in range(scipy.shape(datarcrc)[0]):
	for i in range(scipy.shape(datarcrc)[1]):
		if datarcrc[j,i]==1 and i+scipy.shape(pol)[0]-1 &lt; scipy.shape(datarcrc)[1]:
			datarcrc[j,i:scipy.shape(pol)[0]+i] = datarcrc[j,i:scipy.shape(pol)[0]+i]^pol

#Eliminacion del CRC y paquetes incorrectos
datar = datarx[:,0:datasize-polsize].copy()

#Contador de paquetes correctos de acuerdo al CRC
print "Calculando PER"
per = numpy.sum(numpy.reshape(((numpy.sum(datarcrc,1)!=0)*1),(-1,itera)),1)/itera

#Comparacion entre datab y datar y promedia errores de acuerdo a iteraciones
print "Calculando BER"
ber = numpy.sum((numpy.reshape(numpy.sum(numpy.absolute(datar-datab), axis=1),(-1,itera))),1)/(itera*(datasize-polsize))

print "SNR %BER %PER"
print numpy.vstack([snr,ber*100,per*100]).T
matplotlib.pyplot.semilogy(snr,per,snr,ber)
matplotlib.pyplot.legend(["PER","BER"])
matplotlib.pyplot.show()
</code></pre>
</div>

<p>viktorivan@openmailbox.org</p>

<p>@viktor_ivan</p>

    <a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html" data-text="SciPy como alternativa a Matlab -" data-dnt="true">Twitter</a>
    <div class="g-plusone" data-href="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html" data-annotation="none" data-width="" data-size="medium"></div>
    <div class="g-plus" data-action="share" data-href="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html" data-annotation="none" data-width="" data-size="medium"></div>
    <div class="fb-like" data-href="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html" data-layout="button" data-action="like" data-show-faces="false" data-colorscheme="light" data-kid-directed-site="false" data-share="false"></div>
    <div class="fb-send" data-href="http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html" data-colorscheme="light" data-kid-directed-site="false"></div>
    <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'viktorivanblog'; var disqus_url = 'http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html'; var disqus_identifier = 'http://viktorivan.github.io/matlab/scipy/programacion/2014/06/13/scipy-como-alternativa-a-matlab.html'; var disqus_title = 'SciPy como alternativa a Matlab'; (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//viktorivanblog.disqus.com/embed.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>

</article>

      </div>
    </main>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <div id="fb-root"></div> <script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
    <script type="text/javascript"> (function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/platform.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })(); </script>
    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Iván Rodríguez</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Iván Rodríguez</li>
          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/viktorivan"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">viktorivan</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/viktor_ivan"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">viktor_ivan</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Un blog sobre radio definido por software.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
